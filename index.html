<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Port Audit Form</title>
</head>
<body>
    <h1>Port Audit Form</h1>
    <form id="portAuditForm">
        <!-- New fields added: Site Name and Closet ID -->
        <label for="siteName">Site Name:</label>
        <input type="text" id="siteName" name="siteName"><br><br>

        <label for="closetId">Closet ID:</label>
        <input type="text" id="closetId" name="closetId"><br><br>

        <!-- Existing field: Switch Name -->
        <label for="switchName">Switch Name:</label>
        <input type="text" id="switchName" name="switchName"><br><br>

        <!-- Other port audit fields -->
        <div class="port">
            <label for="portNumber">Port Number:</label>
            <input type="number" id="portNumber" name="portNumber"><br><br>

            <label for="isPluggedIn">Is anything plugged into the port?</label>
            <input type="radio" id="pluggedInYes" name="isPluggedIn" value="Yes">
            <label for="pluggedInYes">Yes</label>
            <input type="radio" id="pluggedInNo" name="isPluggedIn" value="No">
            <label for="pluggedInNo">No</label><br><br>

            <label for="wherePlugged">Where is it plugged into?</label>
            <select id="wherePlugged" name="wherePlugged">
                <option value="Patch Panel">Patch Panel</option>
                <option value="Device">Device</option>
            </select><br><br>

            <label for="deviceOnFarEnd">Device on the far end:</label>
            <input type="text" id="deviceOnFarEnd" name="deviceOnFarEnd"><br><br>

            <label for="portActive">Is the port active?</label>
            <input type="radio" id="portActiveYes" name="portActive" value="Yes">
            <label for="portActiveYes">Yes</label>
            <input type="radio" id="portActiveNo" name="portActive" value="No">
            <label for="portActiveNo">No</label><br><br>

            <label for="patchPanelId">Patch Panel ID:</label>
            <input type="text" id="patchPanelId" name="patchPanelId"><br><br>

            <label for="poeEnabled">PoE Enabled:</label>
            <input type="radio" id="poeEnabledYes" name="poeEnabled" value="Yes">
            <label for="poeEnabledYes">Yes</label>
            <input type="radio" id="poeEnabledNo" name="poeEnabled" value="No">
            <label for="poeEnabledNo">No</label><br><br>
        </div>

        <!-- Add more port sections if necessary -->

        <button type="submit">Submit</button>
    </form>

    <script>
        const form = document.getElementById('portAuditForm');

        form.addEventListener('submit', function (event) {
            event.preventDefault();  // Prevent form from submitting traditionally
            handleFormSubmission();
        });

        function handleFormSubmission() {
            let formDataStr = "";
            const formData = new FormData(form);

            // Gather all form data into a string
            for (let [key, value] of formData.entries()) {
                formDataStr += `${key}: ${value}\n`;
            }

            // Log the form data string (for debugging purposes)
            console.log(formDataStr);

            // Create a blob with the form data
            const blob = new Blob([formDataStr], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);

            // Create a download link and trigger the download
            const a = document.createElement('a');
            a.href = url;
            a.download = `port_audit_${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            // Reset the form
            form.reset();

            // Show an alert to the user
            alert("Form Submitted! Your data has been downloaded.");
        }
    </script>
</body>
</html>
